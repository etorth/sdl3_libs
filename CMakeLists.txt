CMAKE_MINIMUM_REQUIRED(VERSION 3.20)
PROJECT(sdl3_superbuild)

SET(SUPERBUILD_INSTALL_DIR ${CMAKE_BINARY_DIR}/install)

FILE(GLOB EXTPROJ_SCRIPTS "${CMAKE_CURRENT_SOURCE_DIR}/cmake/*.cmake")
FOREACH(SCRIPT ${EXTPROJ_SCRIPTS})
    MESSAGE(STATUS "Including CMake utility script: ${SCRIPT}")
    INCLUDE(${SCRIPT})
ENDFOREACH()

INCLUDE(ExternalProject)
ExternalProject_Add(
    sdl3_test

    DEPENDS libSDL3 libSDL3_ttf

    SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/test
    BINARY_DIR ${CMAKE_BINARY_DIR}/sdl3_test-build

    CMAKE_ARGS
        -DCMAKE_BUILD_TYPE=Release
        -DCMAKE_PREFIX_PATH=${SUPERBUILD_INSTALL_DIR}

    BUILD_ALWAYS TRUE
    INSTALL_COMMAND ""
)
